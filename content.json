{"meta":{"title":"CrazyLeaves","subtitle":null,"description":"ä¸€åªå››å¤„æ¼‚æµæ²¡å¿ƒæ²¡è‚ºçš„Pythonåç«¯å·¥ç¨‹å¸ˆ","author":"CrazyLeaves","url":"https://zifenghuang1.github.io/Blog"},"pages":[{"title":"categories","date":"2018-02-24T04:29:35.000Z","updated":"2018-02-24T04:30:26.000Z","comments":true,"path":"categories/index.html","permalink":"https://zifenghuang1.github.io/Blog/categories/index.html","excerpt":"","text":""},{"title":"about","date":"2018-02-24T05:48:06.000Z","updated":"2018-02-24T06:22:48.000Z","comments":true,"path":"about/index.html","permalink":"https://zifenghuang1.github.io/Blog/about/index.html","excerpt":"","text":"è¥¿å®‰ç”µå­ç§‘æŠ€å¤§å­¦18å±Šè½¯ä»¶å·¥ç¨‹æ¯•ä¸šç”Ÿï¼Œä¸»æ”»Pythonåç«¯ï¼ŒæŠ˜è…¾åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œç›®å‰äºä¸Šæµ·æ¯å¤©é£é›¨å…¼ç¨‹é€å¤–å–ä¸­ã€‚ ç†Ÿç»ƒåˆ‡æ¢ç²¤è¯­å›½è¯­ï¼ŒACGçˆ±å¥½è€…ï¼Œäººç¾¤ææƒ§ç—‡æ‚£è€…ï¼Œæœ€è¿‘ä¸ºå‡å°‘ç”Ÿæ´»æˆæœ¬è€Œæ²‰è¿·å¨è‰ºã€‚ äººç”Ÿå¦‚é€†æ—…ï¼Œæˆ‘äº¦æ˜¯è¡Œäººã€‚ æœ‰å…³Pythonå’Œåç«¯çš„æŠ€æœ¯é—®é¢˜æ¬¢è¿å’Œæˆ‘ä¸€èµ·è®¨è®ºï¼Œæ±‚è½»å–·_(:Ğ·ã€âˆ )_ã€‚ å¾®ä¿¡ï¼škiddingme233 QQ: 529342824"},{"title":"tags","date":"2018-02-24T04:32:38.000Z","updated":"2018-02-24T06:31:06.000Z","comments":true,"path":"tags/index.html","permalink":"https://zifenghuang1.github.io/Blog/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"ç”¨Pythonå®ç°StatsD Serverï¼ˆä¸€ï¼‰ï¼šè“å›¾","slug":"ç”¨Pythonå®ç°StatsD-Serverï¼ˆä¸€ï¼‰ï¼šè“å›¾","date":"2018-08-06T15:24:37.000Z","updated":"2018-08-06T15:26:43.000Z","comments":true,"path":"2018/08/06/ç”¨Pythonå®ç°StatsD-Serverï¼ˆä¸€ï¼‰ï¼šè“å›¾/","link":"","permalink":"https://zifenghuang1.github.io/Blog/2018/08/06/ç”¨Pythonå®ç°StatsD-Serverï¼ˆä¸€ï¼‰ï¼šè“å›¾/","excerpt":"å¯¹äºä¸€åç»ˆæ—¥å¥‹æ–—åœ¨ä¸šåŠ¡æœ€å‰çº¿çš„åç«¯å·¥ç¨‹å¸ˆæ¥è¯´ï¼Œç›‘æ§æ‰“ç‚¹æœåŠ¡å°±åƒæ˜¯å…¨è§†ä¹‹çœ¼ï¼Œæ—¶åˆ»ç›‘ç£ç€çº¿ä¸Šæ•°æ®ï¼Œå¹¶ä¸”åœ¨æ•…éšœå‘ç”Ÿæ—¶ä¸ºå·¥ç¨‹å¸ˆä»¬æä¾›è¯Šæ–­ä¿¡æ¯ã€‚","text":"å¯¹äºä¸€åç»ˆæ—¥å¥‹æ–—åœ¨ä¸šåŠ¡æœ€å‰çº¿çš„åç«¯å·¥ç¨‹å¸ˆæ¥è¯´ï¼Œç›‘æ§æ‰“ç‚¹æœåŠ¡å°±åƒæ˜¯å…¨è§†ä¹‹çœ¼ï¼Œæ—¶åˆ»ç›‘ç£ç€çº¿ä¸Šæ•°æ®ï¼Œå¹¶ä¸”åœ¨æ•…éšœå‘ç”Ÿæ—¶ä¸ºå·¥ç¨‹å¸ˆä»¬æä¾›è¯Šæ–­ä¿¡æ¯ã€‚ ç›‘æ§æ‰“ç‚¹æœåŠ¡æ”¶é›†çš„æ•°æ®åœ¨æˆ‘çœ‹æ¥ä¸»è¦å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç±»æ˜¯éä¸šåŠ¡ç±»æ•°æ®ï¼Œä¸€ç±»æ˜¯ä¸šåŠ¡ç±»æ•°æ®ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè¿ç»´å·¥ç¨‹å¸ˆä¼šå¯¹éä¸šåŠ¡ç±»çš„æ•°æ®æ¯”è¾ƒå…³æ³¨ï¼Œå¦‚çº¿ä¸ŠæœåŠ¡å™¨CPUè´Ÿè½½ï¼Œå†…å­˜ä½¿ç”¨é‡ç­‰ï¼›è€Œå¯¹äºä¸šåŠ¡å›¢é˜Ÿçš„åç«¯å·¥ç¨‹å¸ˆæ¥è¯´ï¼Œåˆ™æ›´ä¸ºå…³æ³¨ä¸šåŠ¡ç±»çš„æ•°æ®ï¼Œæ¯”å¦‚è¯´å¯¹äºä¸€ä¸ªè´Ÿè´£çº¢åŒ…å¼€å‘çš„ä¸šåŠ¡å›¢é˜Ÿï¼Œå°±ä¼šæ¯”è¾ƒå…³æ³¨çº¢åŒ…å‘æ”¾APIçš„QPSï¼Œä¸€æ—¦çº¢åŒ…å‘æ”¾çš„QPSç›¸æ¯”å¾€æ—¥å¼‚å¸¸ï¼Œåˆ™å¯èƒ½çº¿ä¸Šå‡ºç°äº†ä¸šåŠ¡é€»è¾‘ä¸Šçš„å¼‚å¸¸ã€‚ è¯´åˆ°çº¢åŒ…ï¼Œå°±é¡ºä¾¿è¯´ä¸ªç¬‘è¯å§ï¼Œæœ‰ä¸€å¤©æ—©ä¸Šé¥¿äº†ä¹ˆè´Ÿè´£çº¢åŒ…ä¸šåŠ¡çš„å·¥ç¨‹å¸ˆæ”¶åˆ°oncallï¼Œçº¿ä¸Šå‘çº¢åŒ…APIçš„QPSç›¸æ¯”å¾€æ—¥å¢åŠ äº†ä¸€å€ï¼Œæ€€ç–‘æ˜¯æ˜¨æ™šçš„å‘å¸ƒå¯¼è‡´äº†çº¢åŒ…çš„å¼‚å¸¸å‘æ”¾ã€‚å·¥ç¨‹å¸ˆä»¬ä»”ç»†åœ°reviewäº†ä»£ç ï¼Œå‘ç°æ˜¨æ™šå‘å¸ƒçš„ä»£ç ç¡®å®æ²¡æœ‰é—®é¢˜ï¼ŒåŠå°æ—¶åï¼Œä»–ä»¬ç»ˆäºå‘ç°äº†åŸå› ï¼šç¾å›¢å¤–å–çš„æœåŠ¡å™¨æŒ‚äº†ğŸ˜Šã€‚ æ‰¯å›æ­£é¢˜ï¼Œç›‘æ§æ‰“ç‚¹æœåŠ¡è¿˜æœ‰ä¸€ä¸ªéå¸¸é‡è¦çš„æŠ¥è­¦åŠŸèƒ½ï¼Œä¸€æ—¦æŸä¸ªæ•°æ®æŒ‡æ ‡è¾¾åˆ°å·¥ç¨‹å¸ˆçš„é˜€é—¨å€¼ï¼Œåˆ™é€šè¿‡é‚®ä»¶ï¼ŒçŸ­ä¿¡ï¼Œé’‰é’‰ç­‰æ–¹æ³•é€šçŸ¥å·¥ç¨‹å¸ˆã€‚ å…¶å®ç›‘æ§æ‰“ç‚¹æœåŠ¡åœ¨å½“ä»Šä¸šç•Œå·²ç»æœ‰å¾ˆå¤šæˆç†Ÿå¼€æºçš„æ–¹æ¡ˆï¼Œæˆ‘ç°åœ¨è¦å®ç°çš„åªä¸è¿‡æ˜¯å†é€ ä¸€æ¬¡è½®å­ç½¢äº†ï¼Œä½†æ˜¯æ—¢ç„¶è¦é€ è½®å­ï¼Œæ€»å¾—æ¸…æ¥šè¿™ä¸ªè½®å­çš„ç»“æ„å’ŒåŠŸèƒ½ã€‚é‚£ä¹ˆé¦–å…ˆæ¥è°ˆè°ˆï¼Œå®ç°ä¸€ä¸ªç›‘æ§æ‰“ç‚¹æœåŠ¡éœ€è¦å“ªäº›ç»„ä»¶ã€‚ ç›‘æ§æ‰“ç‚¹æœåŠ¡ï¼Œä¸»è¦åˆ†ä¸ºä¸‰ä¸ªç»„ä»¶ï¼Œåˆ†åˆ«æ˜¯Clientï¼ŒServerï¼ŒBackendï¼š Clientå¯ä»¥è§†ä¸ºC/Sæ¶æ„ä¸­çš„Cï¼Œé€šå¸¸ä½œä¸ºSOAæ¡†æ¶ä¸­çš„ä¸€ä¸ªç»„ä»¶å®ç°ï¼Œä¸åŒçš„SOAæœåŠ¡é€šè¿‡Clientå‘é€æ‰“ç‚¹æ•°æ®ã€‚ Serveråˆ™å¯ä»¥è§†ä¸ºC/Sæ¶æ„ä¸­çš„Sï¼Œè´Ÿè´£æ”¶é›†æ¥è‡ªä¸åŒæœåŠ¡çš„æ‰“ç‚¹æ•°æ®ï¼Œå®šæœŸå°†æ•°æ®å‘é€åˆ°Backendã€‚ Backendå¯ä»¥è§†ä¸ºå­˜å‚¨ç£ç›˜ï¼Œå­˜å‚¨æ‰“ç‚¹æ•°æ®å¹¶æä¾›æŸ¥è¯¢åŠŸèƒ½ï¼Œé€šå¸¸å®ç°ä¸ºä¸€ä¸ªæ—¶åºæ•°æ®åº“ã€‚ æ¥ä¸‹æ¥æˆ‘å°†ä¼šé€šè¿‡Pythonå®ç°Clientç»„ä»¶å’ŒServerç»„ä»¶ï¼Œè¯»è€…åªéœ€å…·æœ‰åŸºæœ¬çš„PythonåŸºç¡€å’Œåç«¯æœåŠ¡æ¦‚å¿µå³å¯ã€‚ ç»„ä»¶å…³ç³» Clientç»„ä»¶é€šè¿‡StatsDåè®®ä¸Serverè¿›è¡Œæ²Ÿé€šï¼ŒServeråˆ™æ ¹æ®Backendçš„æ²Ÿé€šåè®®ï¼Œå®šæ—¶å°†æ”¶é›†åˆ°çš„æ•°æ®å­˜å‚¨åˆ°Backendä¹‹ä¸­ã€‚ åœ¨äº†è§£äº†ä¸‰ä¸ªç»„ä»¶çš„å…³ç³»ä»¥åï¼Œä¸‹é¢æ¥é€ä¸€åˆ†ææ¯ä¸ªç»„ä»¶éœ€è¦å®ç°çš„å…·ä½“åŠŸèƒ½ã€‚ Clientç»„ä»¶æŒ‡æ ‡å‡½æ•°Clientç»„ä»¶æ—¢ç„¶æ˜¯é¢å‘å¹¿å¤§åç«¯å·¥ç¨‹å¸ˆæä¾›æ‰“ç‚¹æœåŠ¡ï¼Œé‚£ä¹ˆæœ€é‡è¦çš„è«è¿‡äºæä¾›æ‰“ç‚¹çš„æŒ‡æ ‡å‡½æ•°äº†ï¼ŒStatsDåè®®ä¸­æä¾›äº†å››ç§æ¯”è¾ƒå¸¸è§çš„æŒ‡æ ‡å‡½æ•°ï¼š counterï¼šcounterå‡½æ•°å°±æ˜¯æœ€å¸¸è§çš„è®¡æ•°å™¨æ“ä½œï¼Œå¯¹æŸä¸€ä¸ªkeyçš„valueè¿›è¡Œå¢åŠ æˆ–è€…å‡å°‘ã€‚ timerï¼štimerå‡½æ•°ä¸»è¦ç”¨äºè¡¨ç¤ºä¸€ä¸ªæ—¶é—´æ®µå†…çš„æ•°æ®å˜åŒ–ï¼Œæ¯”å¦‚åœ¨ä¸€æ®µæ—¶é—´å†…çš„æœ€å¤§å€¼ï¼Œæœ€å°å€¼ï¼Œå¹³å‡å€¼ã€‚ gaugeï¼šgaugeå‡½æ•°ä¸counterå‡½æ•°ç±»ä¼¼ï¼Œä½†æ˜¯Serverä¼šå¯¹gaugeæŒ‡æ ‡å‡½æ•°çš„æ•°æ®è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼Œåœ¨å­˜å‚¨æ•°æ®åˆ°Backendæ—¶ä¸ä¼šé‡ç½®gaugeæŒ‡æ ‡å‡½æ•°çš„æ•°æ®ã€‚ setï¼šsetå‡½æ•°çš„æ¦‚å¿µç±»ä¼¼äºPythonä¸­çš„setæ¦‚å¿µï¼ŒServerä¼šæ”¶é›†é€šè¿‡setæŒ‡æ ‡å‡½æ•°çš„unique keyï¼Œå½¢æˆä¸€ä¸ªé›†åˆã€‚ ä¹‹å‰æåˆ°Serverä¼šå®šæ—¶å°†æ•°æ®å­˜å‚¨åˆ°Backendä¸­ï¼Œå…¶ä¸­counterï¼Œtimerï¼ŒsetæŒ‡æ ‡å‡½æ•°ç›¸å…³çš„æ•°æ®åœ¨å‘é€ä»¥åéƒ½ä¼šé‡ç½®æ•°æ®ï¼Œè€ŒgaugeæŒ‡æ ‡å‡½æ•°ç›¸å…³çš„æ•°æ®åˆ™ä¼šä¿ç•™ã€‚ ä¸¤ä¸ªåè®®Clientä¸Serverä¹‹é—´çš„æ²Ÿé€šéœ€è¦ä¸¤ä¸ªåè®®ï¼Œä¸€ä¸ªæ˜¯TCPï¼IPå±‚çš„åè®®ï¼Œä¸€ä¸ªæ˜¯æ–‡æœ¬åè®®ã€‚ TCPï¼IPå±‚çš„åè®®åªæœ‰ä¸¤ä¸ªé€‰æ‹©ï¼šé€‰æ‹©TCPè¿˜æ˜¯UDPï¼ŒTCPä¸»è¦ç”¨äºä¸€äº›å¯¹æ•°æ®å‡†ç¡®æ€§æ¯”è¾ƒé‡è¦çš„åœºæ™¯ï¼Œæ¯”å¦‚ä¸€å¤©åªä¼šå‘é€ä¸€æ¬¡çš„æ‰“ç‚¹æ•°æ®ï¼›è€ŒUDPåˆ™é€‚ç”¨äºçŸ­æ—¶é—´å†…å‘é€å¤§é‡æ•°æ®çš„åœºæ™¯ï¼Œå¯¹äºæ€§èƒ½ä¹Ÿæ¯”è¾ƒå‹å¥½ã€‚ æ–‡æœ¬åè®®åˆ™é€‰æ‹©StatsDåè®®ï¼Œåè®®çš„è§„èŒƒéå¸¸ç®€å•ï¼š 1&lt;key&gt;:value|type[|@sample_rate] è¿™é‡Œè§£é‡Šä¸€ä¸‹sample_rateçš„æ¦‚å¿µï¼Œsample_rateæ˜¯ä»‹äº0åˆ°1ä¹‹é—´çš„ä¸€ä½å°æ•°ï¼Œå‡è®¾sample_rateè®¾ç½®ä¸º0.1ï¼Œé‚£ä¹ˆå¯¹äºåŒä¸€ä¸ªkeyï¼Œ10æ¬¡ä¹‹ä¸­å¤§æ¦‚åªä¼šæœ‰ä¸€æ¬¡æ•°æ®ä¼šè¢«çœŸæ­£å‘é€åˆ°Serverä¸­ï¼Œå½“ServerçŸ¥é“sample_rateä¸º0.1æ—¶ï¼Œå°±ä¼šè‡ªåŠ¨å°†valueä¹˜ä¸Š10ã€‚é€šè¿‡è¿™ç§æŠ½æ ·çš„æ–¹æ³•ï¼Œè™½ç„¶é™ä½äº†æ‰“ç‚¹æ•°æ®çš„å‡†ç¡®ç‡ï¼Œä½†æ˜¯è¿›ä¸€æ­¥æé«˜äº†æ•°æ®ä¼ è¾“æ€§èƒ½ã€‚ Server ç»„ä»¶Serverç»„ä»¶ä¸»è¦è´Ÿè´£æ”¶é›†Clientçš„æ•°æ®ï¼Œå¹¶å°†æ•°æ®å®šæ—¶flushåˆ°Backendä¸­ã€‚ åŸºæœ¬åŠŸèƒ½ Serveréœ€è¦å¸¸é©»äºç¨‹åºåå°ï¼Œå› æ­¤å°†è¢«å®ç°ä¸ºå®ˆæŠ¤è¿›ç¨‹ï¼Œç”±initè¿›ç¨‹ç®¡ç†ã€‚ Serveréœ€è¦æ ¹æ®StatsDåè®®è§£æå¤–éƒ¨çš„æ•°æ®ï¼Œå¹¶å°†æ•°æ®å­˜å‚¨äºå†…å­˜çš„æ•°æ®ç»“æ„ä¸­ã€‚ Serveréœ€è¦å®ç°ä¸€ä¸ªå®šæ—¶å™¨ï¼Œå°†æ•°æ®å®šæ—¶flushåˆ°Backendä¸­ï¼Œå¯é€‰çš„å®šæ—¶å™¨æ¨¡å‹å¦‚å¤šçº¿ç¨‹æ¨¡å‹ï¼ˆthreading.Timerï¼‰ï¼Œåç¨‹æ¨¡å‹ï¼ˆgeventï¼‰ç­‰ã€‚ Serveréœ€è¦å¯¹æ¥å¤šä¸ªBackendï¼Œå› æ­¤éœ€è¦å°†Backendçš„ä¸€äº›åŸºæœ¬æ“ä½œæŠ½è±¡å‡ºæ¥ã€‚ Serverå¯åŠ¨æ—¶éœ€è¦ä»å‘½ä»¤è¡Œä¸­è¯»å–å¾ˆå¤šçš„é…ç½®å‚æ•°ï¼Œä¸€èˆ¬æ¥è¯´Pythonçš„argparseåº“è¶³ä»¥åº”ä»˜å¤§å¤šæ•°çš„æƒ…å†µï¼Œä½†æ˜¯è¿™ä¸€å›æˆ‘é€‰æ‹©ä½¿ç”¨æ›´ä¸ºä¼˜é›…çš„clickï¼Œå†™æ³•åˆ™å¯ä»¥å‚è€ƒGunicornä¸­settings metaå†™æ³•ã€‚ åè®®äº¤äº’Serveré™¤äº†é€šè¿‡StatsDåè®®ä¸Clientè¿›è¡Œäº¤äº’ä»¥å¤–ï¼ŒServerè¿˜è¦è§„å®šåè®®ä¸Backendè¿›è¡Œäº¤äº’ï¼Œä»¥Graphiteä½œä¸ºBackendä¸ºä¾‹ï¼Œèƒ½ä¸Graphiteæ²Ÿé€šçš„åè®®æœ‰çº¯æ–‡æœ¬çš„HTTPåè®®ï¼ŒPythonçš„Pickleåè®®ï¼ŒAMQPåè®®ç­‰ã€‚ Backendç»„ä»¶Backendé€šå¸¸ä½¿ç”¨å¼€æºçš„åˆ†å¸ƒå¼æ—¶åºæ•°æ®åº“ï¼Œåœ¨æœ¬ç³»åˆ—æ•™ç¨‹ä¸­å¹¶ä¸ä¼šå®ç°ï¼Œä½†æ˜¯æœ‰å…´è¶£çš„åŒå­¦å¯ä»¥å‚è€ƒgraphiteçš„whisperç»„ä»¶ï¼Œæ˜¯ä¸€ä¸ªé€šè¿‡Pythonå®ç°çš„800å¤šè¡Œçš„æ—¶åºæ•°æ®åº“ï¼Œè¿™è§„æ¨¡å¤§å°å®åœ¨æ˜¯å¾ˆæœ‰è®©äººä¸€æ¢ç©¶ç«Ÿçš„å†²åŠ¨ã€‚","categories":[{"name":"Python","slug":"Python","permalink":"https://zifenghuang1.github.io/Blog/categories/Python/"}],"tags":[{"name":"Python","slug":"Python","permalink":"https://zifenghuang1.github.io/Blog/tags/Python/"},{"name":"StatsD","slug":"StatsD","permalink":"https://zifenghuang1.github.io/Blog/tags/StatsD/"}]},{"title":"Programing Languages Part A Noteï¼ˆä¸€ï¼‰ï¼šå·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨","slug":"Programing-Languages-Part-A-Noteï¼ˆä¸€ï¼‰ï¼šå·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨","date":"2018-05-31T02:32:15.000Z","updated":"2018-06-12T01:11:34.000Z","comments":true,"path":"2018/05/31/Programing-Languages-Part-A-Noteï¼ˆä¸€ï¼‰ï¼šå·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨/","link":"","permalink":"https://zifenghuang1.github.io/Blog/2018/05/31/Programing-Languages-Part-A-Noteï¼ˆä¸€ï¼‰ï¼šå·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨/","excerpt":"Motivationä¸´è¿‘æ¯•ä¸šå­£ï¼Œæ¯å¤©åœ¨å­¦æ ¡é‡Œé¢é™¤äº†å†™è®ºæ–‡å°±æ˜¯æ”¹è®ºæ–‡ï¼Œç”Ÿæ´»ä¸‰ç‚¹ä¸€çº¿ç•¥æ˜¾æ— èŠï¼Œäºæ˜¯åœ¨çŸ¥ä¹ä¸Šæœç´¢äº†ä¸€ä¸‹Courseraæœ‰ä»€ä¹ˆè¿‘æœŸå¼€è¯¾çš„è®¡ç®—æœºç¥è¯¾ï¼Œçœ‹åˆ°å›ç­”ä¸­æåˆ°åç››é¡¿å¤§å­¦çš„Programing Languageså¹¶ä¸”è¯„ä»·é¢‡é«˜ï¼Œæœæ–­é€‰æ‹©æ—å¬å…¥å‘ã€‚ Programing Languagesæ˜¯ä¸€é—¨ä¸­çº§è¯¾ç¨‹ï¼Œé€‚ç”¨äºæœ‰å­¦ä¹ è¿‡ä¸€é—¨ç¼–ç¨‹è¯­è¨€èƒŒæ™¯çš„å­¦ç”Ÿï¼Œå…¶ç›®çš„æ˜¯é€šè¿‡è®²è¿°å‡ é—¨å°ä¼—è¯­è¨€æ¥æè¿°ç¼–ç¨‹èŒƒå¼ï¼ˆå…¶ä¸­å°¤å…¶æ³¨é‡å‡½æ•°å¼ç¼–ç¨‹èŒƒå¼ï¼‰ã€‚æ•´ä¸ªè¯¾ç¨‹åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼ŒAéƒ¨åˆ†è®²è¿°äº†SMLï¼ŒBéƒ¨åˆ†è®²è¿°äº†Racketï¼ŒCéƒ¨åˆ†è®²è¿°äº†Rubyã€‚ ä¿—è¯è¯´ï¼Œå·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ã€‚åœ¨å­¦ä¹ SMLä¹‹å‰ï¼Œé¦–å…ˆå¾—æŠŠSMLç¯å¢ƒå’Œæ–‡æœ¬ç¼–è¾‘å™¨æ­èµ·æ¥ï¼Œè¯¾ç¨‹é‡Œé¢æå€¡ä½¿ç”¨çš„æ˜¯å…·æœ‰â€œç¥çš„ç¼–è¾‘å™¨â€ä¹‹ç§°çš„Emacsï¼Œå½“ç„¶ä½¿ç”¨åˆ«çš„ç¼–è¾‘å™¨ä¹Ÿå®Œå…¨æ²¡é—®é¢˜ï¼Œæ²¡æœ‰å¼ºåˆ¶è¦æ±‚ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œç¯å¢ƒçš„æ­å»ºå’Œå·¥å…·çš„æµç•…ä½¿ç”¨å¾ˆå¤§ç¨‹åº¦å†³å®šäº†å­¦ä¹ ä¸€é—¨è¯­è¨€çš„åˆæœŸæˆå°±æ„Ÿï¼Œæ‰€ä»¥æŠ•å…¥ä¸€å®šçš„æ—¶é—´åœ¨è¿™ä¸Šé¢è¿˜æ˜¯å¾ˆå€¼å¾—ï¼ˆæ¯”å¦‚ç ”ç©¶Emacsçš„ç”¨æ³•ï¼‰ã€‚ è¯¦ç»†çš„ç¯å¢ƒæ­å»ºæ•™ç¨‹å¯ä»¥è‡ªè¡ŒæŸ¥é˜…è¯¾ç¨‹æä¾›çš„materialï¼ˆé‡Œé¢è®°å½•çš„éå¸¸è¯¦ç»†ï¼‰ï¼Œæˆ‘åœ¨è¿™é‡Œåªè®°å½•ä¸€ä¸‹åœ¨æ­å»ºè¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ä»¥åŠæ˜¯å¦‚ä½•è§£å†³çš„ã€‚","text":"Motivationä¸´è¿‘æ¯•ä¸šå­£ï¼Œæ¯å¤©åœ¨å­¦æ ¡é‡Œé¢é™¤äº†å†™è®ºæ–‡å°±æ˜¯æ”¹è®ºæ–‡ï¼Œç”Ÿæ´»ä¸‰ç‚¹ä¸€çº¿ç•¥æ˜¾æ— èŠï¼Œäºæ˜¯åœ¨çŸ¥ä¹ä¸Šæœç´¢äº†ä¸€ä¸‹Courseraæœ‰ä»€ä¹ˆè¿‘æœŸå¼€è¯¾çš„è®¡ç®—æœºç¥è¯¾ï¼Œçœ‹åˆ°å›ç­”ä¸­æåˆ°åç››é¡¿å¤§å­¦çš„Programing Languageså¹¶ä¸”è¯„ä»·é¢‡é«˜ï¼Œæœæ–­é€‰æ‹©æ—å¬å…¥å‘ã€‚ Programing Languagesæ˜¯ä¸€é—¨ä¸­çº§è¯¾ç¨‹ï¼Œé€‚ç”¨äºæœ‰å­¦ä¹ è¿‡ä¸€é—¨ç¼–ç¨‹è¯­è¨€èƒŒæ™¯çš„å­¦ç”Ÿï¼Œå…¶ç›®çš„æ˜¯é€šè¿‡è®²è¿°å‡ é—¨å°ä¼—è¯­è¨€æ¥æè¿°ç¼–ç¨‹èŒƒå¼ï¼ˆå…¶ä¸­å°¤å…¶æ³¨é‡å‡½æ•°å¼ç¼–ç¨‹èŒƒå¼ï¼‰ã€‚æ•´ä¸ªè¯¾ç¨‹åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼ŒAéƒ¨åˆ†è®²è¿°äº†SMLï¼ŒBéƒ¨åˆ†è®²è¿°äº†Racketï¼ŒCéƒ¨åˆ†è®²è¿°äº†Rubyã€‚ ä¿—è¯è¯´ï¼Œå·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ã€‚åœ¨å­¦ä¹ SMLä¹‹å‰ï¼Œé¦–å…ˆå¾—æŠŠSMLç¯å¢ƒå’Œæ–‡æœ¬ç¼–è¾‘å™¨æ­èµ·æ¥ï¼Œè¯¾ç¨‹é‡Œé¢æå€¡ä½¿ç”¨çš„æ˜¯å…·æœ‰â€œç¥çš„ç¼–è¾‘å™¨â€ä¹‹ç§°çš„Emacsï¼Œå½“ç„¶ä½¿ç”¨åˆ«çš„ç¼–è¾‘å™¨ä¹Ÿå®Œå…¨æ²¡é—®é¢˜ï¼Œæ²¡æœ‰å¼ºåˆ¶è¦æ±‚ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œç¯å¢ƒçš„æ­å»ºå’Œå·¥å…·çš„æµç•…ä½¿ç”¨å¾ˆå¤§ç¨‹åº¦å†³å®šäº†å­¦ä¹ ä¸€é—¨è¯­è¨€çš„åˆæœŸæˆå°±æ„Ÿï¼Œæ‰€ä»¥æŠ•å…¥ä¸€å®šçš„æ—¶é—´åœ¨è¿™ä¸Šé¢è¿˜æ˜¯å¾ˆå€¼å¾—ï¼ˆæ¯”å¦‚ç ”ç©¶Emacsçš„ç”¨æ³•ï¼‰ã€‚ è¯¦ç»†çš„ç¯å¢ƒæ­å»ºæ•™ç¨‹å¯ä»¥è‡ªè¡ŒæŸ¥é˜…è¯¾ç¨‹æä¾›çš„materialï¼ˆé‡Œé¢è®°å½•çš„éå¸¸è¯¦ç»†ï¼‰ï¼Œæˆ‘åœ¨è¿™é‡Œåªè®°å½•ä¸€ä¸‹åœ¨æ­å»ºè¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ä»¥åŠæ˜¯å¦‚ä½•è§£å†³çš„ã€‚ Use Coursera Forumå¦‚æœé‡åˆ°ä»»ä½•åœ¨æ•™ç¨‹ä¸­æ²¡æœ‰ç»™å‡ºè§£å†³æ–¹æ¡ˆçš„é—®é¢˜ï¼Œé¦–å…ˆåœ¨Coursera Forumé‡Œé¢æœä¸€ä¸‹ï¼Œé‡Œé¢åŸºæœ¬æœ‰é—®é¢˜çš„è§£å†³æ–¹æ³•ã€‚ç½‘é¡µç‰ˆçš„Courseraåœ¨ä¸€äº›è¿˜æ²¡å¼€è¯¾æˆ–è€…åˆšåˆšå¼€è¯¾çš„è¯¾ç¨‹ä¸»é¡µä¸Šï¼Œæœ‰å¯èƒ½æ²¡æœ‰æ˜¾ç¤ºè®ºå›çš„å…¥å£ï¼Œæ‰€ä»¥ä¸€å¼€å§‹æˆ‘æ˜¯åœ¨iosç‰ˆçš„Courseraé‡Œé¢è¿›å…¥è®ºå›çš„ï¼Œåæ¥éœ€è¦åœ¨è®ºå›ä¸Šç¼–è¾‘å›å¤æ‰‹æœºç‰ˆéå¸¸ä¸æ–¹ä¾¿ï¼Œæ‰€ä»¥Googleäº†ä¸€ä¸‹æ‰¾åˆ°è§£å†³æ–¹æ³•ï¼Œå‘ç°è¿›å…¥discussion forumçš„é“¾æ¥æ˜¯æœ‰è§„å¾‹çš„ï¼Œæ¯”å¦‚æˆ‘ç°åœ¨ä¸Šçš„è¿™é—¨è¯¾çš„ä¸»é¡µæ˜¯https://www.coursera.org/learn/programming-languagesï¼Œåªè¦åœ¨é“¾æ¥åé¢åŠ ä¸Š/discussionså°±èƒ½ç›´æ¥è¿›å…¥è¯¾ç¨‹è®ºå›äº†ã€‚ å¦‚æœä»¥ä¸Šé“¾æ¥æ‰“ä¸å¼€ï¼Œä½ å¯èƒ½éœ€è¦é¦–å…ˆå­¦ä¼šå¦‚ä½•ç§‘å­¦ä¸Šç½‘ã€‚ SML EnvironmentæŒ‰ç…§æ•™ç¨‹åœ¨Mac OSX Sierraä¸Šå®‰è£…SML v110.79å®Œä¹‹åï¼Œç„¶åé€šè¿‡smlå‘½ä»¤å¯åŠ¨REPLçš„æ—¶å€™é‡åˆ°äº†ä¸€ä¸ªå¥‡æ€ªçš„é”™è¯¯ï¼š 1sml: unable to determine architecture/operating system åœ¨StackOverFlowä¸Šé¢æœäº†ä¸€ä¸‹å‘ç°æ˜¯79ç‰ˆæœ¬çš„å·²çŸ¥bugï¼Œ80ç‰ˆæœ¬è¿™ä¸ªbugå·²ç»ä¿®å¤ï¼Œè§£å†³æ–¹æ³•æ˜¯ç”¨brewé‡è£…SMLæˆ–è€…æ”¹ä¸€ä¸‹SMLçš„å¯åŠ¨Shellæ–‡ä»¶ï¼Œç¬¬äºŒç§çœ‹èµ·æ¥æ¯”è¾ƒçœäº‹ç›´æ¥å°±ç”¨ç¬¬äºŒç§å§ã€‚ æ‰“å¼€/usr/local/smlnj/bin/.arch-n-opsysæ–‡ä»¶ï¼Œåœ¨ä¸‹é¢è¿™ä¸ªä½ç½®åŠ å…¥è‡ªå·±çš„Macç³»ç»Ÿç‰ˆæœ¬å³å¯ï¼š 1234567891010*) OPSYS=darwin; HEAP_OPSYS=darwin ;; # MacOS X 10.6 11*) OPSYS=darwin; HEAP_OPSYS=darwin ;; # MacOS X 10.7 12*) OPSYS=darwin; HEAP_OPSYS=darwin ;; # MacOS X 10.8 13*) OPSYS=darwin; HEAP_OPSYS=darwin ;; # MacOS X 10.9 Mavericks 14*) OPSYS=darwin; HEAP_OPSYS=darwin ;; # MacOS X 10.10 Yosemite 15*) OPSYS=darwin; HEAP_OPSYS=darwin ;; # MacOS X 10.11 El Capitan 16*) OPSYS=darwin; HEAP_OPSYS=darwin ;; # MacOS X 10.12 Sierra 17*) OPSYS=darwin; HEAP_OPSYS=darwin ;; # MacOS X 10.13 High Sierra *) exit 1;; Update åœ¨æœ€æ–°çš„æ•™ç¨‹é‡Œé¢æç¤ºå¯ä»¥å®‰è£…110.80ç‰ˆæœ¬ï¼Œä½†æ˜¯materialé‡Œé¢æ‰“å¼€çš„è·³è½¬é“¾æ¥ä¼¼ä¹ä»ç„¶æ˜¯110.79ç‰ˆæœ¬ï¼Œè¿™é‡Œå¤§å®¶è¦æ³¨æ„ä¸€ç‚¹ã€‚æ¨èå¤§å®¶å°½é‡ä¸è¦è£…110.79ç‰ˆæœ¬ï¼Œå› ä¸º79ç‰ˆæœ¬è¿˜æœ‰ä¸ªbugå°±æ˜¯åŸºæœ¬åº“å¼•ç”¨ä¸äº†ï¼Œåœ¨Homework 1ä¸­æœ‰ä¸€é“é¢˜ç›®çš„è¦æ±‚å°±æ˜¯ä½¿ç”¨Int.ToStringè¿™ä¸ªåº“å‡½æ•°ï¼Œå¦‚æœæ˜¯79ç‰ˆæœ¬å°±ä¼šæŠ¥é”™æ‰¾ä¸åˆ°è¿™ä¸ªåº“çš„è·¯å¾„ï¼š 1234unexpected exception (bug?) in SML/NJ: Io [Io: openIn failed on &quot;/Users/jhr/Work/smlnj/osx-dist/smlnj.dst/sml.boot.x86-unix/smlnj/basis/.cm/x86-unix/basis.cm&quot;, No such file or directory] raised at: Basis/Implementation/IO/bin-io-fn.sml:617.25-617.71 ../cm/util/safeio.sml:30.11 ../compiler/TopLevel/interact/evalloop.sml:44.55 åœ¨Coursera Forumé‡Œé¢æåˆ°æ›´æ–°åˆ°80ç‰ˆæœ¬å°±èƒ½è§£å†³è¿™ä¸ªé—®é¢˜äº†ï¼Œåœ¨Macä¸Šå·²ç»å®‰è£…äº†79ç‰ˆæœ¬çš„åŒå­¦åªéœ€è¦æŠŠ80ç‰ˆæœ¬çš„pkgä¸‹è½½ä¸‹æ¥ç›´æ¥å®‰è£…å³å¯ã€‚ SML Mode InstallationSML Modeæ˜¯Emacsæ”¯æŒSML REPLçš„ä¸€ä¸ªæ’ä»¶ï¼ŒåŸºæœ¬æ‰€æœ‰çš„Key Bindingéƒ½æ˜¯ä»Mæˆ–è€…Cå¼€å¤´ï¼ŒCå°±æ˜¯Controlè¿™ä¸ªå¤§å®¶éƒ½æ‡‚ï¼Œä½†Måˆæ˜¯ä»€ä¹ˆå‘¢ï¼ŸMæ˜¯æŒ‡Metaé”®ï¼Œä½†Macé”®ç›˜ä¸Šæ²¡æœ‰Metaé”®ï¼Œå¯ä»¥é€šè¿‡å°†Metaé”®ç»‘å®šåˆ°Optionä¸Šé¢ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ç”¨Alt+bæ¥è¡¨ç¤ºMetaé”®ã€‚éœ€è¦æ³¨æ„Macç³»ç»Ÿæœ¬èº«ä¹Ÿå¸¦æœ‰emacsï¼Œå› æ­¤é€šè¿‡å‘½ä»¤è¡Œå¯åŠ¨çš„emacsé»˜è®¤æ˜¯è€ç‰ˆæœ¬ï¼Œä¸€äº›Key Bindingæ˜¯æœªå®šä¹‰çš„ï¼Œå¯ä»¥é€šè¿‡Spotlightæ¥æ‰“å¼€æ–°ç‰ˆEmacsã€‚ é€šè¿‡C-x C-f test.smlæ‰“å¼€ä¸€ä¸ªå‘½åä¸ºtestçš„smlæ–‡ä»¶ä»¥åï¼Œå†è¾“å…¥C-c C-så°†ä¼šåœ¨Emacsåº•ç«¯å¼¹å‡ºsml commandï¼Œè¾“å…¥smlå°†è¿›å…¥SML REPLï¼Œä½†æ˜¯æ­¤æ—¶å¼¹å‡ºäº†ä¸€ä¸ªå¾ˆå¥‡æ€ªçš„é”™è¯¯ï¼š 12sml command:smlSearching for program: no such file or directory, sml æœäº†ä¸€ä¸‹å‘ç°æ˜¯Emacsåœ¨å¯åŠ¨çš„æ—¶å€™æ²¡æ‰¾åˆ°smlå‘½ä»¤ï¼Œå› æ­¤éœ€è¦åœ¨Homeç›®å½•ä¸‹ç¼–è¾‘Emacsçš„å¯åŠ¨é…ç½®æ–‡ä»¶.emacsï¼ˆå…¶å®æ•™ç¨‹é‡Œé¢ä¹Ÿæœ‰æåŠè¿™ä¸ªé—®é¢˜ï¼Œæˆ‘çœ‹æ¼äº†ã€‚ã€‚ï¼‰: 123# For Mac OSX 10.6 or later(setenv &quot;PATH&quot; (concat &quot;/usr/local/smlnj/bin:&quot; (getenv &quot;PATH&quot;)))(setq exec-path (cons &quot;/usr/local/smlnj/bin&quot; exec-path)) ç¼–è¾‘å®Œæˆtest.smlæ–‡ä»¶ä¹‹åï¼Œé€šè¿‡C-x C-sä¿å­˜æ–‡ä»¶ã€‚ Emacs Technique ä¸Šå›¾æ˜¯æˆ‘å¸¸ç”¨çš„ä¸€ä¸ªEmacså·¥ä½œç¯å¢ƒå¸ƒå±€ï¼Œå·¦ä¸Šè§’çš„bufferï¼ˆåœ¨Emacsé‡Œé¢ä¸€ä¸ªç¼–è¾‘çª—å£è¢«ç§°ä¸ºbufferï¼‰æ˜¯ä¸€ä¸ªSML REPLï¼Œç”¨äºè¿è¡ŒHomeworkçš„testæ–‡ä»¶ï¼›å·¦ä¸‹è§’çš„bufferæ˜¯ç¼–å†™Homeworkçš„æ–‡ä»¶ï¼›å³ä¸Šè§’çš„bufferæ˜¯Homeworkçš„testæ–‡ä»¶ï¼›å³ä¸‹è§’çš„bufferæ˜¯ä¸€ä¸ªCommand Consoleï¼Œç”¨äºæ˜¾ç¤ºå¯¹æ–‡ä»¶è¿›è¡Œäº†å“ªäº›å‘½ä»¤æ“ä½œã€‚ é¦–å…ˆè¯´ä¸€ä¸‹å¦‚ä½•å¼„æˆè¿™ä¸ªç¯å¢ƒå¸ƒå±€ï¼š é¦–å…ˆé€šè¿‡C-x C-fæ‰“å¼€Homeworkæ–‡ä»¶ä»¥åŠtestæ–‡ä»¶ï¼Œå¹¶é€šè¿‡C-c C-sè°ƒå‡ºSML REPLï¼Œæ­¤æ—¶Emacsä¸Šæ˜¾ç¤ºçš„æ˜¯ä¸€ä¸ªä¸Šä¸‹å¸ƒå±€ã€‚ è®©å…‰æ ‡æ‚¬æµ®åœ¨ä¸Šé¢çš„bufferä¸­ï¼Œé€šè¿‡C-x 3å°†å…‰æ ‡åœç•™çš„bufferæ°´å¹³åˆ‡åˆ†æˆä¸¤ä¸ªbufferï¼›ç„¶åè®©å…‰æ ‡åœç•™åœ¨ä¸‹é¢çš„bufferä½œåŒæ ·å¤„ç†ï¼Œæ­¤æ—¶Emacsçš„ä¸€ä¸ªå››æ–¹æ ¼å¸ƒå±€å·²ç»å‡ºæ¥äº†ã€‚ è®©å…‰æ ‡åœç•™åœ¨ä»»æ„ä¸€ä¸ªbufferï¼Œé€šè¿‡C-x C-bæŸ¥çœ‹å½“å‰æ‰“å¼€çš„æ‰€æœ‰bufferï¼Œåœ¨æ¯ä¸ªbufferä¸­é€šè¿‡C-x b buffer_nameåˆ‡æ¢å½“å‰bufferåˆ°å¯¹åº”çš„bufferã€‚ å¦‚æœæƒ³ç”Ÿæˆæˆ‘ä¸Šè¿°çš„å¸ƒå±€ï¼Œåˆ†åˆ«æ˜¯å·¦ä¸Šè§’çš„bufferï¼ˆå…‰æ ‡ä¹Ÿè¦åœç•™åœ¨å·¦ä¸Šè§’çš„bufferï¼‰ï¼šC-x b *sml*ï¼›å·¦ä¸‹è§’çš„bufferï¼šC-x b hw1.smlï¼›å³ä¸Šè§’çš„bufferï¼šC-x b test_hw1.smlï¼›å³ä¸‹è§’çš„bufferï¼šC-x b *Messages* ï¼ˆå¯¹åº”Command Consoleï¼‰ã€‚ ç¯å¢ƒå¸ƒå±€å¼„å¥½ä¹‹åï¼Œé€šè¿‡é¼ æ ‡ç‚¹å‡»æˆ–è€…C-x oå°±èƒ½ç§»åŠ¨å…‰æ ‡åˆ°ä¸åŒçš„bufferã€‚ æ¥ä¸‹æ¥å°±æ˜¯Homeworkç¼–å†™çš„æµç¨‹äº†ï¼š åœ¨Homework.smlæ–‡ä»¶ç¼–å†™å¯¹åº”çš„functionï¼Œç¼–å†™å®Œæˆä¹‹åè®°å¾—è¦é€šè¿‡C-x C-sä¿å­˜ï¼ŒEmacsé»˜è®¤æ˜¯ä¸ä¼šè‡ªåŠ¨ä¿å­˜å†™å…¥çš„ã€‚ åœ¨testæ–‡ä»¶ä¹‹ä¸­ç¼–å†™æµ‹è¯•ï¼Œé¦–è¡Œé€šè¿‡useè¯­å¥å¼•å…¥homeworkæ–‡ä»¶ï¼Œä¿å­˜ã€‚ åœ¨SML REPLé‡Œé¢é€šè¿‡useè¯­å¥å¼•å…¥testæ–‡ä»¶ï¼Œæ ¸å¯¹æµ‹è¯•ç»“æœã€‚ å‚è€ƒé“¾æ¥ï¼šEmacs Splitting Windows æœ‰æƒ³è¦å…±åŒåˆ·è¯¾çš„æ¬¢è¿ç§ä¿¡æˆ‘ï¼ŒEnjoy Codeã€‚","categories":[{"name":"Coursera","slug":"Coursera","permalink":"https://zifenghuang1.github.io/Blog/categories/Coursera/"}],"tags":[{"name":"Programing languages","slug":"Programing-languages","permalink":"https://zifenghuang1.github.io/Blog/tags/Programing-languages/"}]},{"title":"Pythonæè¿°å™¨åè®®","slug":"Pythonæè¿°å™¨åè®®","date":"2018-03-02T15:29:10.000Z","updated":"2018-03-02T15:42:06.000Z","comments":true,"path":"2018/03/02/Pythonæè¿°å™¨åè®®/","link":"","permalink":"https://zifenghuang1.github.io/Blog/2018/03/02/Pythonæè¿°å™¨åè®®/","excerpt":"Abstractæœ¬æ–‡å°†ä»ä¸‰ä¸ªé—®é¢˜æ¥é˜è¿°Python Descriptorï¼š ä»€ä¹ˆæ˜¯Descriptorï¼Ÿ Descriptorå¦‚ä½•è¢«è°ƒç”¨ï¼Ÿ Non Data Descriptor ä¸ Data Descriptoræœ‰ä½•åŒºåˆ«ï¼Ÿ åœ¨å›ç­”å®Œè¿™ä¸‰ä¸ªé—®é¢˜ä¹‹åï¼Œæœ¬æ–‡è¿˜å°†åˆ—ä¸¾å‡ ä¸ªä½¿ç”¨Descriptorçš„ä¾‹å­ï¼š @PropertyåŸç† åŸºäºPropertyå®ç°@cached_property Pythonå‡½æ•°å’Œæ–¹æ³•çš„åŒºåˆ« â€‹ å¦‚æœä¹‹å‰ä¸äº†è§£Python Descriptorï¼Œå»ºè®®å…ˆè¿‡ä¸€éDescriptor How To Guideã€‚å¯¹äºè‹±è¯­ä¸è¿‡å…³çš„åŒå­¦ï¼Œä¹Ÿå¯ä»¥çœ‹ä¸€ä¸‹ä¸­æ–‡èµ„æºã€‚","text":"Abstractæœ¬æ–‡å°†ä»ä¸‰ä¸ªé—®é¢˜æ¥é˜è¿°Python Descriptorï¼š ä»€ä¹ˆæ˜¯Descriptorï¼Ÿ Descriptorå¦‚ä½•è¢«è°ƒç”¨ï¼Ÿ Non Data Descriptor ä¸ Data Descriptoræœ‰ä½•åŒºåˆ«ï¼Ÿ åœ¨å›ç­”å®Œè¿™ä¸‰ä¸ªé—®é¢˜ä¹‹åï¼Œæœ¬æ–‡è¿˜å°†åˆ—ä¸¾å‡ ä¸ªä½¿ç”¨Descriptorçš„ä¾‹å­ï¼š @PropertyåŸç† åŸºäºPropertyå®ç°@cached_property Pythonå‡½æ•°å’Œæ–¹æ³•çš„åŒºåˆ« â€‹ å¦‚æœä¹‹å‰ä¸äº†è§£Python Descriptorï¼Œå»ºè®®å…ˆè¿‡ä¸€éDescriptor How To Guideã€‚å¯¹äºè‹±è¯­ä¸è¿‡å…³çš„åŒå­¦ï¼Œä¹Ÿå¯ä»¥çœ‹ä¸€ä¸‹ä¸­æ–‡èµ„æºã€‚ ä»€ä¹ˆæ˜¯Descriptorï¼Ÿ123456789101112131415161718192021222324252627282930313233343536class Descriptor(object): def __init__(self): self.val = \"init\" def __get__(self, obj, type=None): \"\"\" return value \"\"\" return self.val def __set__(self, obj, value): \"\"\" return None \"\"\" self.val = value def __delete__(self, obj): \"\"\" return None \"\"\" del self.val class A(object): x = Descriptor() In [2]: a = A()In [3]: a.xOut[3]: 'init'In [4]: a.x = \"change\"In [5]: a.xOut[5]: 'change' å¦‚æœä¸€ä¸ªç»§æ‰¿äºobjectçš„ç±»å®ç°äº†__get__ï¼Œ__set_\\ï¼Œ__delete__ä¸­å…¶ä¸­ä»»æ„ä¸€ç§æ–¹æ³•ï¼Œé‚£ä¹ˆè¯¥ç±»çš„å¯¹è±¡å°±æ˜¯ä¸€ä¸ªdescriptorï¼Œåœ¨ä¸Šè¿°ä¾‹å­ä¸­a.xå°±æ˜¯ä¸€ä¸ªæè¿°å™¨ã€‚ ä¸ºä»€ä¹ˆä¸€å®šè¦ç»§æ‰¿äºobjectå‘¢ï¼Ÿå› ä¸ºdescriptoræœºåˆ¶åªä½œç”¨äºæ–°å¼ç±»ã€‚ Descriptorå¦‚ä½•è¢«è°ƒç”¨ï¼ŸDescriptorçš„è°ƒç”¨æœºåˆ¶æ˜¯åŸºäºPythonçš„å±æ€§è®¿é—®æœºåˆ¶çš„ï¼Œå› æ­¤å¼„æ¸…æ¥šPythonçš„å±æ€§è®¿é—®æœºåˆ¶æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚ Before Descriptoråœ¨å‡ºç°Descriptoræœºåˆ¶ä¹‹å‰ï¼Œå¦‚æœè®¿é—®a.xå±æ€§ï¼Œåˆ™Pythonå±æ€§é»˜è®¤çš„æŸ¥æ‰¾é¡ºåºæ˜¯ï¼š After Descriptoråœ¨å‡ºç°Descriptorä¹‹åï¼ŒPythonå¯¹è±¡å±æ€§çš„è®¿é—®æœºåˆ¶å°±å‡ºç°äº†å˜åŒ–ï¼Œä¸‹é¢ä»¥Pythonä»£ç æ¨¡æ‹Ÿè¿™ä¸€ä¸ªå¯»æ‰¾è¿‡ç¨‹ï¼š 123456789101112131415161718192021222324252627282930313233343536def object_getattr(obj, name): value, cls = class_lookup(obj.__class__, name) # é¦–å…ˆåˆ¤æ–­æ˜¯å¦ä¸ºData Descriptor if value is not None and hasattr(value, \"__get__\") and hasattr(value, \"__set__\"): return value.__get__(obj, cls) # åˆ¤æ–­å±æ€§æ˜¯å¦åœ¨å¯¹è±¡çš„__dict__ä¸­ï¼ˆObject Attributeï¼‰ w = obj.__dict__.get(name) if w is not None: return w if value is not None: # åˆ¤æ–­æ˜¯å¦ä¸ºNon Data Descriptor if hasattr(v, \"__get__\"): return v.__get__(obj, cls) else: # åˆ¤æ–­æ˜¯å¦ä¸ºæ™®é€šçš„ç±»å±æ€§ return v raise AttributeError def class_lookup(cls, name): value = cls.__dict__.get(name) if value is not None: return value, cls # éå†åŸºç±»å¯»æ‰¾å±æ€§ for i in cls.__bases__: value, cls = class_lookup(i, name) if value is not None: return value, cls return None, None åœ¨ä¸Šé¢çš„Pythonä»£ç ä¸­å¾ˆå®¹æ˜“å¯ä»¥çœ‹åˆ°How to Guideä¸­å¼ºè°ƒçš„Descriptorä¼˜å…ˆçº§æ˜¯å¦‚ä½•ä¿è¯çš„ï¼šData Descriptor &gt; Object Attribute &gt; Non Data Descriptorã€‚ æœ‰ä¸€ä¸ªæƒ³è·Ÿå¤§å®¶åˆ†äº«æ¯”è¾ƒç‰¹æ®Šçš„ä¾‹å­æ˜¯ï¼Œå¦‚æœåœ¨obj.__dict__ä¸­æ‰¾åˆ°çš„å¯¹è±¡æ˜¯ä¸€ä¸ªdescriptorï¼Œé‚£ä¹ˆdescriptoræœºåˆ¶å¹¶ä¸ä¼šè¢«è°ƒç”¨ï¼Œå³a.__dict__[â€˜xâ€™] = Descriptor()ï¼Œé‚£ä¹ˆa.xå¹¶ä¸ä¼šè°ƒç”¨__get__æ–¹æ³•ã€‚ 123456789101112131415161718192021class Descriptor(object): def __init__(self, val): self.val = val def __get__(self, obj, type=None): return self.val def __set__(self, obj, val): self.val = val class A(object): passIn [2]: a = A()In [3]: a.__dict__['x'] = Descriptor(\"descriptor\")In [4]: a.xOut[4]: &lt;__main__.Descriptor at 0x10b03c750&gt; ç›¸æ¯”Pythonå¯¹è±¡å±æ€§çš„è®¿é—®æœºåˆ¶ï¼ŒPythonç±»å±æ€§çš„è®¿é—®æœºåˆ¶æœ‰ä¸€ç‚¹åŒºåˆ«ï¼š åœ¨Pythonä¸­ï¼Œç±»å…¶å®ä¹Ÿæ˜¯ä¸€ç§å¯¹è±¡ï¼Œåªä¸è¿‡ç±»æ˜¯é€šè¿‡MetaClassï¼ˆå…ƒç±»ï¼‰ç”Ÿæˆçš„ï¼Œå› æ­¤Pythonç±»å±æ€§çš„è®¿é—®ä¼šå°†ä¸Šè¿°çš„class_lookupå‡½æ•°æ›¿æ¢ä¸ºmetaclass_lookupå‡½æ•°ã€‚ Object Attributeçš„æŸ¥æ‰¾æ›¿æ¢ä¸ºå¯¹class.__mro__çš„éå†æŸ¥æ‰¾ï¼Œå¹¶ä¸”åœ¨è¿™ä¸ªæŸ¥æ‰¾è¿‡ç¨‹ä¸­ä¼šåˆ¤æ–­æ‰¾åˆ°çš„å¯¹è±¡æ˜¯å¦æ‹¥æœ‰__get__æ–¹æ³•ï¼Œå¦‚æœæ‹¥æœ‰åˆ™è°ƒç”¨ã€‚ ç±»å±æ€§è®¿é—®æœºåˆ¶è°ƒç”¨çš„_get\\_æ–¹æ³•ä¼ å…¥å‚æ•°æ—¶ï¼Œobjå‚æ•°ä¼ å…¥Noneï¼Œtypeå‚æ•°ä¼ å…¥classã€‚ å¸Œæœ›æ›´è¯¦ç»†åœ°æ¢ç©¶Pythonç±»å±æ€§è®¿é—®æœºåˆ¶çš„åŒå­¦å¯ä»¥çœ‹è¿™é‡Œï¼šobject-attribute-lookup-in-python Non Data Descriptor ä¸ Data Descriptoræœ‰ä½•åŒºåˆ«ï¼ŸNon Data Descriptoråªéœ€å®ç°__get_æ–¹æ³•ï¼ŒData Descriptoréœ€è¦åŒæ—¶å®ç°\\_get__æ–¹æ³•å’Œ__set__æ–¹æ³•ã€‚ å¦‚æœè¦å®ç°ä¸€ä¸ªåªè¯»çš„Data Descriptorï¼Œé‚£ä¹ˆåªéœ€è¦åœ¨__set__æ–¹æ³•ä¸­æŠ›å‡ºå¼‚å¸¸å³å¯ã€‚ Data Descriptorå’ŒNon Data Descriptoræœ€å¤§çš„åŒºåˆ«å°±æ˜¯ä¸Šè¿°çš„ä¼˜å…ˆçº§é—®é¢˜ï¼Œå½“descriptorä¸obj.__dict__ä¸­ä¸€ä¸ªå±æ€§åŒåæ—¶ï¼š å¦‚æœdescriptoræ˜¯ä¸€ä¸ªData Descriptorï¼Œé‚£ä¹ˆè¿”å›descriptor.__get__çš„è°ƒç”¨å€¼ã€‚ å¦‚æœdescriptoræ˜¯ä¸€ä¸ªNon Data Descriptorï¼Œé‚£ä¹ˆè¿”å›obj.__dict__ä¸­çš„å±æ€§å€¼ã€‚ 12345678910111213141516171819202122232425262728293031323334353637class NonDataDescriptor(object): def __init__(self): self.value = \"nondata_descriptor\" def __get__(self, instance, owner): return self.value class DataDescriptor(object): def __init__(self): self.value = \"data_descriptor\" def __get__(self, instance, owner): return self.value def __set__(self, instance, value): self.value = value class Container(object): d1 = NonDataDescriptor() d2 = DataDescriptor() In [14]: c = Container()In [15]: c.__dict__['d1'] = \"nondata\"In [16]: c.__dict__['d2'] = \"data\"In [17]: c.d1Out[17]: 'nondata'In [18]: c.d2Out[18]: 'data_descriptor' @PropertyåŸç†Propertyåœ¨Pythonæºç ä¸­è¢«å®ç°ä¸ºä¸€ä¸ªç±»ï¼Œé€šè¿‡Propertyå¯ä»¥å¿«é€Ÿå®šä¹‰ä¸€ä¸ªData Descriptorã€‚ Propertyçš„çº¯Pythonä»£ç å®ç°å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839class Property(object): def __init__(self, fget=None, fset=None, fdel=None, doc=None): self.fget = fget self.fset = fset self.fdel = fdel self.__doc__ = doc def __get__(self, obj, type=None): if obj is None: return self if self.fget is None: raise AttributeError(\"UnReadable Attribute.\") return self.fget(obj) def __set__(self, obj, value): if self.fset is None: raise AttributeError(\"can't set Attribute.\") self.fset(obj, value) def __delete__(self, obj): if self.del is None: raise AttributeError(\"can't delete Attribute.\") self.del(obj) def getter(self, fget): return type(self)(fget, fset=self.fset, fdel=self.fdel, doc=self.__doc__) def setter(self, fset): return type(self)(self.fget, fset, fdel=self.fdel, doc=self.__doc__) def deleter(self, fdel): return type(self)(self.fget, self.fset, fdel, self.__doc__) Propertyçš„ä½¿ç”¨æ–¹æ³•ä¸€èˆ¬æœ‰ä¸¤ç§ï¼š 123456789101112131415161718# ç¬¬ä¸€ç§ä½¿ç”¨æ–¹æ³•ï¼š@propertydef a(self): ... @a.setterdef a(self, value) ... # ç¬¬äºŒç§ä½¿ç”¨æ–¹æ³•a = property()@a.getterdef get_a(): ...@a.setterdef set_a(): ... æœ‰æ—¶å€™å¸¸å¸¸è¢«@è¿™ä¸ªç¬¦å·æ‰€è¿·æƒ‘ï¼Œå…¶å®@ç¬¦å·åŸºæœ¬å¯ä»¥ç­‰ä»·ä¸ºa = property(a)ã€‚ åœ¨ä½¿ç”¨ç¬¬ä¸€ç§æ–¹æ³•æ—¶ï¼Œéœ€è¦æ³¨æ„setterè£…é¥°çš„æ–¹æ³•å¿…é¡»è·Ÿpropertyè£…é¥°çš„æ–¹æ³•åŒåï¼Œå¦åˆ™setterè£…é¥°å™¨å°†ä¸èµ·ä½œç”¨ï¼Œstackoverflowä¸Šä¹Ÿæœ‰å…³äºè¿™ä¸ªé—®é¢˜çš„è®¨è®ºã€‚ åŸºäºPropertyå®ç°@cached_property@cached_propertyè£…é¥°å™¨æ˜¯ä¸€ç§å¾ˆå¸¸ç”¨çš„è½®å­ï¼Œåœ¨Djangoå’ŒWerkzeugä¸­éƒ½æœ‰ç±»ä¼¼çš„å®ç°ã€‚åœ¨å®ç°çš„æ—¶å€™éœ€è¦æ³¨æ„ä»¥ä¸‹ä¸¤ç‚¹ï¼š å®ä¾‹çš„æ›´æ”¹æ˜¯å¦ä¼šæ±¡æŸ“ç±»å˜é‡ æ›´æ–°å®é™…çš„valueæ—¶æ˜¯å¦åŒæ—¶æ›´æ–°äº†ç¼“å­˜ä¸­çš„å€¼ è¿™æ˜¯æ˜¯æˆ‘ä¸€å¼€å§‹å†™çš„ä¸€ä¸ªé”™è¯¯å®ç°ï¼š 123456789101112131415161718192021222324252627282930313233343536373839class CachedProperty(property): def __init__(self, *args, **kwargs): super(CachedProperty, self).__init__(*args, **kwargs) self._cached_property = None def __get__(self, obj, type=None): if obj is None: return self if self.fget is None: raise AttributeError(\"UnReadable Attribute.\") if self._cached_property is None: self._cached_property = self.fget(obj) return self._cached_property def __set__(self, obj, value): if self.fset is None: raise AttributeError(\"can't set Attribute.\") self.fset(obj, value) self._cached_property = self.fget(obj) def __delete__(self, obj): super(CachedProperty, self).__init__(obj) self._cached_property = None class Container(object): @CachedProperty def attr(self): return self._attr @attr.setter def attr(self, value): self._attr = value è¿™ä¸€ç§å®ç°å“ªé‡Œå‡ºé”™äº†å‘¢ï¼Ÿå®ƒçš„å®ä¾‹æ±¡æŸ“äº†å…¨å±€å˜é‡ï¼š 12345678910111213141516In [11]: c1 = Container()In [12]: c1.attr = \"c1 attr\"In [13]: c1.attrOut[13]: 'c1 attr'In [14]: c2 = Container()In [15]: c2.attrOut[15]: 'c1 attr'In [16]: c2.attr = \"c2 attr\"In [17]: c1.attrOut[17]: 'c2 attr' å› æ­¤ç¼“å­˜çš„valueä¸åº”è¯¥ç»‘å®šåœ¨CachedPropertyçš„å®ä¾‹ä¸Šé¢ï¼Œå¦åˆ™æ¯ä¸€ä¸ªContainerçš„å®ä¾‹éƒ½èƒ½æ”¹å˜å…¶ä»–å®ä¾‹çš„attrå±æ€§ï¼Œé€ æˆäº†ç±»å˜é‡çš„æ±¡æŸ“ã€‚ æ­£ç¡®çš„å®ç°åº”è¯¥æ˜¯æ¯ä¸ªå®ä¾‹çš„ç¼“å­˜ç»‘å®šåœ¨å„è‡ªçš„__dict__å˜é‡ä¸­ï¼š 1234567891011121314151617181920212223242526272829class CachedProperty(property): def __init__(self, *args, **kwargs): super(CachedProperty, self).__init__(*args, **kwargs) def __get__(self, obj, type=None): if obj is None: return self if self.fget is None: raise AttributeError(\"Unreadable attribute\") cached_key = self.fget.__name__ if cached_key not in obj.__dict__: obj.__dict__[cached_key] = self.fget(obj) return obj.__dict__[cached_key] def __set__(self, obj, value): if self.fset is None: raise AttributeError(\"Unset attribute\") self.fset(obj, value) cached_key = self.fget.__name__ obj.__dict__[cached_key] = self.fget(obj) def __delete__(self, obj): super(CachedProperty, self).__delete__(obj) del obj.__dict__[self.fget.__name__] Pythonå‡½æ•°å’Œæ–¹æ³•çš„åŒºåˆ«Functionåœ¨Pythonä¸­è¢«å®ç°ä¸ºä¸€ä¸ªNon Data Descriptorï¼Œä»¥ä¸‹æ˜¯Pythonä»£ç è¡¨ç¤ºçš„Functionï¼š 1234class Function(object): def __get__(self, obj, type=None): return types.MethodType(self, obj, type) å½“åœ¨ç±»ä¸­å®šä¹‰Functionçš„æ—¶å€™ï¼Œå¦‚æœç›´æ¥è®¿é—®ç±»çš„__dict__å˜é‡ï¼Œä»èƒ½å¾—åˆ°ä¸€ä¸ªFunction objectï¼Œæ­¤æ—¶æ‹¿åˆ°çš„è¿˜ä¸æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œå› ä¸ºFunction è¿˜æ²¡æœ‰è·Ÿå®ä¾‹ç»‘å®šã€‚ 1234567class A(object): def test(self): pass In [2]: A.__dict__['test']Out[2]: &lt;function __main__.test&gt; å½“ä»å®ä¾‹è°ƒç”¨æ–¹æ³•æ—¶ï¼Œa.testç­‰ä»·äºtypes.MethodType(test, a, None)ï¼Œæ­¤æ—¶è¿”å›ä¸€ä¸ªbound methodï¼Œå³test functionå·²ç»ç»‘å®šäº†å®ä¾‹aã€‚ å½“ä»ç±»è°ƒç”¨æ–¹æ³•æ—¶ï¼ŒA.testç­‰ä»·äºtypes.MethodType(test, None, A)ï¼Œæ­¤æ—¶è¿”å›çš„æ˜¯unbound methodã€‚ @classmethodclassmethodéœ€è¦ç»‘å®šclassï¼Œä»¥ä¸‹æ˜¯Pythonä»£ç å®ç°ï¼š 12345678910111213class classmethod(object): def __init__(self, f): self.f = f def __get__(self, obj, klass=None): if klass is None: klass = type(obj) def newfunc(*args, **kwargs): return self.f(klass, *args, **kwargs) return newfunc å› æ­¤åœ¨Pythonä¸­å¦‚æœä¸€ä¸ªç±»çš„æ–¹æ³•ä½¿ç”¨äº†@classmethodï¼Œå³ä½¿ä»å®ä¾‹è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œä¼ è¿›å»çš„ç¬¬ä¸€ä¸ªå‚æ•°ä»ç„¶æ˜¯classã€‚ @staticmethodstaticmethodä¸éœ€è¦ç»‘å®šclassï¼Œä»¥ä¸‹æ˜¯Pythonä»£ç å®ç°ï¼š 1234567class staticmethod(object): def __init__(self, f): self.f = f def __get__(self, obj, type=None) return self.f å‚è€ƒèµ„æ–™ï¼š Descriptor How To Guide å¦‚ä½•ç†è§£ Python çš„ Descriptor? object-attribute-lookup-in-python(å¼ºçƒˆæ¨è)st=>start: a.x cond1=>condition: a.__dict__['x']? cond2=>condition: type(a).__dict__['x']? cond3=>condition: type(a)çš„åŸºç±».__dict__['x']? end1=>end: AttributeError end2=>end: return st->cond1 cond1(yes)->end2 cond1(no)->cond2 cond2(yes)->end2 cond2(no)->cond3 cond3(yes)->end2 cond3(no)->end1{\"scale\":1,\"line-width\":2,\"line-length\":50,\"text-margin\":10,\"font-size\":12} var code = document.getElementById(\"flowchart-0-code\").value; var options = JSON.parse(decodeURIComponent(document.getElementById(\"flowchart-0-options\").value)); var diagram = flowchart.parse(code); diagram.drawSVG(\"flowchart-0\", options);","categories":[{"name":"Python","slug":"Python","permalink":"https://zifenghuang1.github.io/Blog/categories/Python/"}],"tags":[{"name":"Python","slug":"Python","permalink":"https://zifenghuang1.github.io/Blog/tags/Python/"}]},{"title":"Hello,2018","slug":"Hello-2018","date":"2018-02-24T06:25:23.000Z","updated":"2018-02-24T13:43:49.000Z","comments":true,"path":"2018/02/24/Hello-2018/","link":"","permalink":"https://zifenghuang1.github.io/Blog/2018/02/24/Hello-2018/","excerpt":"","text":"åšå®¢ç”±CSDNè½¬ç§»åˆ°Hexoï¼Œæ–°çš„ä¸€å¹´ï¼Œæ–°çš„å¼€å§‹ã€‚ 2018ï¼Œä¸Šæµ·ï¼Œå¯èˆªï¼","categories":[{"name":"living","slug":"living","permalink":"https://zifenghuang1.github.io/Blog/categories/living/"}],"tags":[{"name":"ç”Ÿæ´»","slug":"ç”Ÿæ´»","permalink":"https://zifenghuang1.github.io/Blog/tags/ç”Ÿæ´»/"}]}]}